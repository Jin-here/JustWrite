package com.timefk.aiweibo.activity;

import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.widget.ImageView;
import android.widget.Toast;

import com.example.avrilweibo.R;
import com.example.pojo.User;
import com.timefk.aiweibo.dao.UserDao;
import com.timefk.aiweibo.util.Tools;


public class LoadActivity extends Activity {
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		super.onCreate(savedInstanceState);
		setContentView(R.layout.load);
		
		ImageView loadImage = (ImageView)findViewById(R.id.loadImageView);
		//͸��Ƚ��涯��(ȡֵ��0.1~1.0)
		AlphaAnimation animation = new AlphaAnimation(0.0f,1.0f);
		//��ָ��������ʱ��
		animation.setDuration(500);
		loadImage.setAnimation(animation);
		
		animation.setAnimationListener(new AnimationListener() {
			//�������ʱ��ִ��
			@Override
			public void onAnimationStart(Animation arg0) {
				// TODO Auto-generated method stub
				//�������״̬������
				init();
				
			}
			//�����ظ�ִ�е�ʱ��ִ��
			@Override
			public void onAnimationRepeat(Animation arg0) {
				// TODO Auto-generated method stub
				
			}
			//���������ʱ��ִ��
			@Override
			public void onAnimationEnd(Animation arg0) {
				// TODO Auto-generated method stub
				
			}
		});
		
		
	}
	
	public void init(){
		Tools.checkNetwork(LoadActivity.this);
		UserDao dao = new UserDao(this);
		List<User> userList = dao.findAllUsers();
		
		if (userList == null || userList.isEmpty()){
			Toast.makeText(this, "hello", Toast.LENGTH_SHORT).show();
			Intent intent = new Intent(this,OAuthActivity.class);
			startActivity(intent);
			
		}
	}
}
