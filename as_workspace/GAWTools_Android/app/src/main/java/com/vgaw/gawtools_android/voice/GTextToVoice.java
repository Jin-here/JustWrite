package com.vgaw.gawtools_android.voice;

import android.content.Context;
import android.os.Bundle;
import android.os.IBinder;
import android.os.RemoteException;

import com.iflytek.cloud.SpeechConstant;
import com.iflytek.cloud.SpeechSynthesizer;
import com.iflytek.cloud.SpeechUtility;
import com.iflytek.cloud.SynthesizerListener;

/**
 * Created by Administrator on 2015/8/10.
 */
public class GTextToVoice {
    private static final String APPID = "55c8b73d";

    private Context context;
    private SpeechSynthesizer mTts;
    private SynthesizerListener mSynListener;

    public GTextToVoice(Context context) {
        this.context = context;
        mSynListener = null;

        //1.????SpeechSynthesizer????, ????????????????????InitListener
        mTts = SpeechSynthesizer.createSynthesizer(context, null);
        setDefault();
    }

    /**
     * ???¨°???
     *
     * @param key   ???»ÇSpeechConstant.SPEED??????????
     * @param value
     */
    public void setParameter(String  key, String value) {
        mTts.setParameter(key, value);
    }

    private void setDefault() {
        //2.??????????????????????MSC API???(Android)??SpeechSynthesizer ??
        mTts.setParameter(SpeechConstant.VOICE_NAME, "nannan");//???¡Â?????
        mTts.setParameter(SpeechConstant.SPEED, "50");//????????
        mTts.setParameter(SpeechConstant.VOLUME, "80");//????????????¦¶0~100
        mTts.setParameter(SpeechConstant.ENGINE_TYPE, SpeechConstant.TYPE_CLOUD); //???????
    }
    //???¨²?????????¦Ë?????????åï??¦Ë????????????./sdcard/iflytek.pcm??
    //??????SD???????AndroidManifest.xml???§ÕSD?????
    //????????????????????????§Õ???
    //mTts.setParameter(SpeechConstant.TTS_AUDIO_PATH,"./sdcard/iflytek.pcm");

    /**
     * ??§Ø????????????????????
     * @param sentence
     */
    public void speak(String sentence) {
        //3.??????
        mTts.startSpeaking(sentence, mSynListener);
    }

    /**
     * ?????????????????
     * @param mSynListener
     */
    public void setLoadListener(SynthesizerListener mSynListener){
        this.mSynListener = mSynListener;
    }

    //????????????????????????§Ô?????????????MSC??????????ýq????????????????????Application??Activity??onCreate????)
    //??????????????????????null?????????????????????????????????¨°?????SpeechConstant.APPID +"=12345678," + SpeechConstant.FORCE_LOGIN +"=true"
    //SpeechUtility.createUtility(context, SpeechConstant.APPID +"=55c8b73d");

}